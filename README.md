AetherAI √ó Fortinet Cloud Security Challenge
============================================

Sistema inteligente de manuten√ß√£o preditiva industrial com seguran√ßa avan√ßada Fortinet na Oracle Cloud

üåü Vis√£o Geral
O Sistema de Manuten√ß√£o Preditiva Industrial √© uma solu√ß√£o completa que combina IoT, computa√ß√£o em nuvem e intelig√™ncia artificial para prever falhas em equipamentos antes que ocorram. Desenvolvido como parte do Challenge de Seguran√ßa Cloud - uma parceria entre AetherAI e Fortinet - o sistema apresenta uma arquitetura robusta e segura implementada na Oracle Cloud Infrastructure (OCI).
üéØ Transformando a manuten√ß√£o industrial

[![Build Status](https://img.shields.io/jenkins/build?jobUrl=https%3A%2F%2Fjenkins.aetherai.com%2Fjob%2Ffortinet-challenge%2F&style=flat-square)](https://jenkins.aetherai.com/job/fortinet-challenge/)
[![SonarQube Coverage](https://img.shields.io/sonar/coverage/aetherAI-fortinet-challenge?server=https%3A%2F%2Fsonar.aetherai.com&style=flat-square)](https://sonar.aetherai.com/dashboard?id=aetherAI-fortinet-challenge)
[![License](https://img.shields.io/badge/license-Proprietary-red.svg?style=flat-square)](LICENSE)
[![OCI](https://img.shields.io/badge/cloud-OCI-orange?style=flat-square)](https://www.oracle.com/cloud/)
[![Fortinet](https://img.shields.io/badge/security-Fortinet-yellow.svg?style=flat-square)](https://www.fortinet.com/)
[![Version](https://img.shields.io/badge/version-1.0.0--beta-blue.svg?style=flat-square)](https://github.com/aetherAI/fortinet-challenge/releases)

### Diagrama de Arquitetura

![Arquitetura do Sistema](docs/diagrams/arquitetura-completa.svg)


```bash
# Clonar o reposit√≥rio
git clone https://github.com/aetherAI/fortinet-challenge.git
cd fortinet-challenge

# Configurar credenciais OCI (necess√°rio ter OCI CLI instalado)
oci setup config

# Implantar infraestrutura base
cd terraform/environments/dev
terraform init && terraform apply

# Implantar aplica√ß√£o
cd ../../..
./scripts/setup/deploy-dev.sh
```

### Refer√™ncia da API

Documenta√ß√£o completa das APIs est√° dispon√≠vel nos seguintes formatos:
- Os exemplos de uso estar√£o na sess√£o de tecnologias.

- **Swagger UI**: Dispon√≠vel em `https://api.aetherai.com/docs` quando o sistema est√° em execu√ß√£o
- **OpenAPI Spec**: Dispon√≠vel em `docs/api/openapi.yaml`
- **Postman Collection**: Dispon√≠vel em `docs/api/aetherAI-fortinet-challenge.postman_collection.json`

### Solu√ß√£o

Nossa solu√ß√£o implementa manuten√ß√£o preditiva baseada em dados e IA para:
- Monitorar equipamentos continuamente atrav√©s de sensores IoT
- Analisar padr√µes e detectar anomalias que precedem falhas
- Prever problemas com anteced√™ncia suficiente para agendamento otimizado de manuten√ß√£o
- Aumentar a vida √∫til dos equipamentos e reduzir downtime n√£o planejado
- Fornecer insights acion√°veis para equipes de manuten√ß√£o

Tudo isso dentro de uma arquitetura segura que integra as solu√ß√µes de seguran√ßa Fortinet com os recursos nativos da Oracle Cloud.

### Benef√≠cios

- **Redu√ß√£o de Custos**: Diminui√ß√£o de 30-50% nos custos de manuten√ß√£o atrav√©s da otimiza√ß√£o dos ciclos de reparo
- **Aumento de Disponibilidade**: Redu√ß√£o de 70-90% em downtime n√£o planejado
- **Extens√£o de Vida √ötil**: Aumento de 20-40% na vida √∫til dos equipamentos
- **Seguran√ßa Robusta**: Prote√ß√£o completa da coleta de dados at√© o processamento na nuvem
- **Otimiza√ß√£o de Recursos**: Planejamento eficiente de equipes e pe√ßas de reposi√ß√£o
- **Intelig√™ncia Acion√°vel**: Dashboards e alertas que convertem dados em a√ß√µes concretas

### Casos de Uso

A solu√ß√£o foi projetada para diversos ambientes industriais, incluindo:
- Instala√ß√µes de processamento e fabrica√ß√£o
- Plantas de tratamento de √°gua e esgoto
- Instala√ß√µes de gera√ß√£o e distribui√ß√£o de energia
- Opera√ß√µes de minera√ß√£o e extra√ß√£o
- Ind√∫stria de √≥leo e g√°s

## Arquitetura

A arquitetura do sistema √© composta por quatro camadas principais que trabalham de forma integrada:

### Camadas do Sistema

![Camadas do Sistema](docs/diagrams/seguranca-camadas.svg)

#### 1. Camada F√≠sica (IoT)

A camada f√≠sica √© respons√°vel pela coleta de dados dos equipamentos industriais atrav√©s de sensores conectados a um Raspberry Pi, que funciona como controlador local.

**Componentes:**
- **Raspberry Pi 4**: Controlador central que coleta, processa inicialmente e transmite os dados
- **Sensores Industriais**: Monitoram diversos par√¢metros dos equipamentos (detalhados na se√ß√£o de componentes)
- **Gateway IoT**: Conecta os dispositivos edge √† infraestrutura de nuvem
- **Edge Computing**: Processamento local para redu√ß√£o de lat√™ncia e tr√°fego

#### 2. Camada de Seguran√ßa (Fortinet)

A camada de seguran√ßa Fortinet fornece prote√ß√£o completa para todo o fluxo de dados e infraestrutura do sistema.

**Componentes:**
- **FortiGate**: Firewall NGFW para prote√ß√£o perimetral e segmenta√ß√£o de rede
- **FortiWeb**: WAF (Web Application Firewall) para prote√ß√£o das APIs
- **FortiManager**: Gest√£o centralizada de dispositivos e pol√≠ticas Fortinet
- **FortiAnalyzer**: Agrega√ß√£o de logs, an√°lise de seguran√ßa e conformidade
- **FortiSOAR**: Orquestra√ß√£o e automa√ß√£o de resposta a incidentes
- **FortiAuthenticator**: Gest√£o de identidade e autentica√ß√£o multifator

#### 3. Camada de Nuvem (OCI)

A Oracle Cloud Infrastructure fornece a plataforma para processamento, armazenamento e an√°lise dos dados coletados.

**Componentes:**
- **OKE (Kubernetes)**: Orquestra√ß√£o de cont√™ineres para os microservi√ßos
- **Functions**: Processamento serverless para eventos e transforma√ß√µes
- **API Gateway**: Gerenciamento e exposi√ß√£o segura das APIs
- **Streaming**: Ingest√£o e processamento de fluxos de dados em tempo real
- **Object Storage**: Armazenamento de dados n√£o estruturados (hist√≥ricos, backups)
- **Autonomous Database**: Armazenamento principal de dados estruturados
- **AI Services**: Servi√ßos de ML para an√°lise preditiva

#### 4. Camada de DevSecOps

![Fluxo de Dados](docs/diagrams/pipeline-cicd-detalhado.svg)

A camada de DevSecOps garante desenvolvimento, integra√ß√£o, entrega e monitoramento cont√≠nuos e seguros.

**Componentes:**
- **Terraform**: Infraestrutura como c√≥digo (IaC)
- **GitHub**: Controle de vers√£o e colabora√ß√£o
- **Jenkins**: Automa√ß√£o de CI/CD
- **SonarQube**: An√°lise de qualidade de c√≥digo
- **Trivy**: Escaneamento de vulnerabilidades
- **Grafana**: Visualiza√ß√£o de m√©tricas e monitoramento

### Fluxo de Dados

![Fluxo de Dados](docs/diagrams/fluxo-dados.svg)

1. Sensores coletam dados de equipamentos industriais (temperatura, vibra√ß√£o, corrente, etc.)
2. Raspberry Pi processa localmente e envia via MQTT para o Gateway IoT
3. Dados atravessam a camada de seguran√ßa Fortinet
4. OCI Streaming ingere dados em tempo real
5. Fun√ß√µes processam dados para detec√ß√£o de anomalias
6. Dados s√£o armazenados no Autonomous Database
7. Algoritmos de IA analisam padr√µes para previs√£o de falhas
8. APIs exp√µem resultados para aplica√ß√µes e dashboards
9. Sistema de notifica√ß√£o alerta sobre poss√≠veis falhas
10. Equipe de manuten√ß√£o recebe ordens de servi√ßo preventivas

### Integra√ß√£o de Seguran√ßa

![Integra√ß√£o Fortinet-OCI](docs/diagrams/fortinet-oci-seguranca.svg)

A integra√ß√£o entre as solu√ß√µes Fortinet e os recursos nativos de seguran√ßa da OCI cria m√∫ltiplas camadas de prote√ß√£o:

1. **Per√≠metro Externo**: FortiGate NGFW protege todo o tr√°fego de entrada e sa√≠da
2. **Zona DMZ**: FortiWeb WAF protege APIs e aplica√ß√µes web
3. **Seguran√ßa Interna**: Micro-segmenta√ß√£o e prote√ß√£o de tr√°fego leste-oeste
4. **Prote√ß√£o de Dados**: Criptografia, controle de acesso e mascaramento
5. **Monitoramento**: Detec√ß√£o e resposta a amea√ßas em tempo real

## üîí Seguran√ßa de Software

A seguran√ßa √© um pilar fundamental deste projeto, seguindo o princ√≠pio de "Security by Design" em todas as etapas do desenvolvimento. Implementamos uma estrat√©gia abrangente que vai al√©m das pr√°ticas tradicionais.

### An√°lise Est√°tica de C√≥digo Cont√≠nua

![Seguran√ßa de Software](docs/diagrams/seguranca-camadas.svg)

Cada linha de c√≥digo passa por rigorosa an√°lise est√°tica utilizando:

- **SonarQube Enterprise**: Varredura completa com regras personalizadas para detec√ß√£o de:
  - Vulnerabilidades OWASP Top 10
  - Code smells e d√©bitos t√©cnicos
  - Bugs de seguran√ßa em TypeScript e Python
  - Complexidade ciclom√°tica excessiva
  - Anti-padr√µes de seguran√ßa

- **Fortify Static Code Analyzer**: An√°lise profunda de fluxo de dados para identificar:
  - Vulnerabilidades de inje√ß√£o (SQL, NoSQL, comandos)
  - Vazamentos de informa√ß√µes sens√≠veis
  - Configura√ß√µes inseguras
  - Fraquezas criptogr√°ficas

- **Checkmarx SAST**: Varredura complementar focada em:
  - Vulnerabilidades espec√≠ficas de frameworks (NestJS, FastAPI)
  - Falhas em bibliotecas de terceiros
  - Cross-Site Scripting (XSS) e Cross-Site Request Forgery (CSRF)

### Pipeline de Seguran√ßa Cont√≠nua

Integra√ß√£o robusta entre Jenkins e ferramentas de seguran√ßa Fortinet:

- **Quality Gates Rigorosos**: Build falha automaticamente se:
  - Vulnerabilidades cr√≠ticas ou altas forem detectadas
  - Cobertura de testes cair abaixo de 85%
  - Novas d√≠vidas t√©cnicas excederem limites estabelecidos

- **Revis√£o de Depend√™ncias**: Verifica√ß√£o autom√°tica com:
  - OWASP Dependency Check
  - Snyk Vulnerability Scanner
  - Renovate Bot para atualiza√ß√µes proativas

- **Verifica√ß√£o de Segredos**: Preven√ß√£o contra vazamento de credenciais com:
  - GitLeaks pre-commit
  - TruffleHog em verifica√ß√µes CI
  - HashiCorp Vault para gest√£o de segredos

### Testes de Seguran√ßa Automatizados

Bateria completa de testes focados em seguran√ßa:

- **DAST (Dynamic Application Security Testing)**: 
  - OWASP ZAP integrado ao CI/CD
  - Burp Suite Enterprise para testes agendados

- **Testes de Pentest Automatizados**:
  - Nuclei com templates personalizados
  - Testes de fuzzing para APIs

- **Container Security**:
  - Trivy para scan de imagens
  - Falco para monitoramento de runtime
  - Anchore Engine para pol√≠ticas de compliance

## üõ°Ô∏è Integra√ß√£o Fortinet-DevSecOps

![Fortinet DevSecOps](docs/diagrams/fortinet-devsecops.svg)

Nossa arquitetura implementa uma integra√ß√£o pioneira entre as ferramentas de CI/CD e a suite de seguran√ßa Fortinet, criando um ecossistema de DevSecOps verdadeiramente integrado.

### FortiDevSec + Jenkins

Desenvolvemos uma integra√ß√£o customizada entre Jenkins e FortiDevSec para seguran√ßa de aplica√ß√µes nativa de cloud:

- **Plugins Jenkins Personalizados**:
  - Escaneamento de c√≥digo com FortiDevSec SAST antes de cada merge
  - Dashboard unificado de vulnerabilidades dentro do Jenkins
  - Classifica√ß√£o autom√°tica de severidade de falhas

- **Webhooks Bidirecionais**:
  - Notifica√ß√£o autom√°tica de vulnerabilidades no Slack/MS Teams
  - Cria√ß√£o de tickets Jira para vulnerabilidades cr√≠ticas
  - Bloqueio inteligente de merge baseado em pol√≠ticas de seguran√ßa

- **Relat√≥rios Consolidados**:
  - Agrega√ß√£o de resultados de seguran√ßa de m√∫ltiplas ferramentas
  - Hist√≥rico de melhorias de seguran√ßa ao longo do tempo
  - Conformidade com benchmarks de seguran√ßa (OWASP, CIS, NIST)

### FortiCWP para Seguran√ßa Cloud

Integramos FortiCWP (Cloud Workload Protection) para garantir a seguran√ßa dos recursos na OCI:

- **Monitoramento de Configura√ß√£o Cloud**:
  - Verifica√ß√£o cont√≠nua de configura√ß√µes da OCI contra CIS Benchmarks
  - Alertas para desvios de pol√≠ticas de seguran√ßa
  - Remedia√ß√£o autom√°tica para viola√ß√µes de menor risco

- **Prote√ß√£o de Workloads em Runtime**:
  - Monitoramento comportamental de containers e VMs
  - Detec√ß√£o de atividades suspeitas em tempo real
  - Integra√ß√£o com FortiSOAR para resposta a incidentes

- **Gerenciamento de Postura de Seguran√ßa**:
  - Painel √∫nico de visibilidade para recursos OCI
  - Auditoria de conformidade automatizada
  - Avalia√ß√£o cont√≠nua de riscos com pontua√ß√£o de seguran√ßa

### FortiSIEM para Monitoramento

Implementamos FortiSIEM para correlacionar eventos de seguran√ßa em todo o ambiente:

- **Coleta Centralizada de Logs**:
  - Agrega√ß√£o de logs de aplica√ß√µes, infraestrutura e seguran√ßa
  - Normaliza√ß√£o e enriquecimento de dados
  - Arquivamento seguro para an√°lise forense

- **Detec√ß√£o Avan√ßada de Amea√ßas**:
  - Correla√ß√£o de eventos com base em ML
  - Detec√ß√£o de anomalias comportamentais
  - Alerta e resposta automatizada para incidentes

- **Integra√ß√£o com SOC**:
  - Dashboards customizados para equipe de seguran√ßa
  - Fluxos de trabalho para investiga√ß√£o de incidentes
  - Rastreamento de KPIs de seguran√ßa

## Tecnologias

![Tecnologias](docs/diagrams/arquitetura-clean-architecture.svg)

### Estrutura de Diret√≥rios

```
aetherAI-fortinet-challenge/
‚îú‚îÄ‚îÄ terraform/                           # Infraestrutura como c√≥digo
‚îÇ   ‚îú‚îÄ‚îÄ modules/                         # M√≥dulos reutiliz√°veis
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ network/                     # Recursos de rede (VCN, subnets)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ compute/                     # Recursos de computa√ß√£o (OKE, VMs)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database/                    # Recursos de banco de dados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security/                    # Recursos de seguran√ßa
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ monitoring/                  # Recursos de monitoramento
‚îÇ   ‚îú‚îÄ‚îÄ environments/                    # Configura√ß√µes por ambiente
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dev/                         # Ambiente de desenvolvimento
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ staging/                     # Ambiente de homologa√ß√£o
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prod/                        # Ambiente de produ√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ scripts/                         # Scripts auxiliares para Terraform
‚îÇ
‚îú‚îÄ‚îÄ microservices/                       # Microservi√ßos (Clean Architecture)
‚îÇ   ‚îú‚îÄ‚îÄ equipment-service/               # Servi√ßo de gerenciamento de equipamentos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ domain/                  # Camada de dom√≠nio (Clean Architecture)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entities/            # Entidades de neg√≥cio
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ value-objects/       # Objetos de valor
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repositories/        # Interfaces de reposit√≥rios
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/            # Servi√ßos de dom√≠nio
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ events/              # Eventos de dom√≠nio
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ application/             # Camada de aplica√ß√£o
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-cases/           # Casos de uso
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dtos/                # Data Transfer Objects
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exceptions/          # Exce√ß√µes da aplica√ß√£o
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ interfaces/          # Interfaces de servi√ßos externos
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validators/          # Validadores
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/          # Camada de infraestrutura
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database/            # Implementa√ß√£o de persist√™ncia
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repositories/    # Implementa√ß√µes de reposit√≥rios
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/          # Modelos ORM
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/      # Migra√ß√µes de banco de dados
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ external/            # Integra√ß√µes externas
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clients/         # Clientes HTTP 
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ adapters/        # Adaptadores para servi√ßos externos
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ messaging/           # Implementa√ß√£o de mensageria
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ publishers/      # Publicadores de eventos
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ subscribers/     # Consumidores de eventos
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ security/            # Implementa√ß√µes de seguran√ßa
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ presentation/            # Camada de apresenta√ß√£o
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ controllers/         # Controladores de API
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ middlewares/         # Middlewares
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ validators/          # Validadores de entrada
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ views/               # Transformadores de resposta
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ routes/              # Defini√ß√£o de rotas
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tests/                       # Testes
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unit/                    # Testes unit√°rios
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ integration/             # Testes de integra√ß√£o
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ e2e/                     # Testes end-to-end
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/                      # Configura√ß√µes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                   # Configura√ß√£o do container
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ package.json                 # Depend√™ncias
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ sensor-service/                  # Servi√ßo de gerenciamento de sensores
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (mesma estrutura da Clean Architecture)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ maintenance-service/             # Servi√ßo de manuten√ß√£o
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (mesma estrutura da Clean Architecture)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ telemetry-service/               # Processamento de telemetria
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (mesma estrutura da Clean Architecture)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ analytics-service/               # An√°lise de dados (Python)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ domain/                  # Camada de dom√≠nio
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ application/             # Camada de aplica√ß√£o
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/          # Camada de infraestrutura
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ presentation/            # Camada de apresenta√ß√£o (FastAPI)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (restante da estrutura)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ ai-service/                      # Servi√ßo de IA preditiva (Python)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (estrutura similar ao analytics-service)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ notification-service/            # Servi√ßo de notifica√ß√µes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (mesma estrutura da Clean Architecture)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ auth-service/                    # Servi√ßo de autentica√ß√£o
‚îÇ       ‚îî‚îÄ‚îÄ ... (mesma estrutura da Clean Architecture)
‚îÇ
‚îú‚îÄ‚îÄ lambdas/                             # Fun√ß√µes serverless (OCI Functions)
‚îÇ   ‚îú‚îÄ‚îÄ data-transformation/             # Transforma√ß√£o de dados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/                         # C√≥digo-fonte
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test/                        # Testes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ func.yaml                    # Configura√ß√£o da fun√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ anomaly-detection/               # Detec√ß√£o de anomalias
‚îÇ   ‚îî‚îÄ‚îÄ alert-trigger/                   # Gatilho de alertas
‚îÇ
‚îú‚îÄ‚îÄ iot/                                 # C√≥digo para dispositivos IoT
‚îÇ   ‚îî‚îÄ‚îÄ raspberry-pi/                    # C√≥digo para Raspberry Pi
‚îÇ       ‚îú‚îÄ‚îÄ src/                         # C√≥digo-fonte
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ sensors/                 # Drivers para sensores
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ mqtt/                    # Cliente MQTT
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ processing/              # Processamento local
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ utils/                   # Utilit√°rios
‚îÇ       ‚îú‚îÄ‚îÄ tests/                       # Testes
‚îÇ       ‚îú‚îÄ‚îÄ config/                      # Arquivos de configura√ß√£o
‚îÇ       ‚îî‚îÄ‚îÄ requirements.txt             # Depend√™ncias Python
‚îÇ
‚îú‚îÄ‚îÄ frontend/                            # Interface web (planejado)
‚îÇ   ‚îú‚îÄ‚îÄ src/                             # C√≥digo-fonte
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/                  # Componentes React
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/                       # P√°ginas da aplica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/                    # Servi√ßos e APIs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/                       # React hooks customizados
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/                       # Utilit√°rios
‚îÇ   ‚îú‚îÄ‚îÄ public/                          # Arquivos est√°ticos
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile                       # Configura√ß√£o do container
‚îÇ
‚îú‚îÄ‚îÄ security/                            # Configura√ß√µes e pol√≠ticas de seguran√ßa
‚îÇ   ‚îú‚îÄ‚îÄ fortinet/                        # Configura√ß√µes espec√≠ficas do Fortinet
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fortigate/                   # Configura√ß√µes do FortiGate
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fortiweb/                    # Configura√ß√µes do FortiWeb
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ fortisoar/                   # Configura√ß√µes do FortiSOAR
‚îÇ   ‚îú‚îÄ‚îÄ policies/                        # Pol√≠ticas de seguran√ßa
‚îÇ   ‚îî‚îÄ‚îÄ scripts/                         # Scripts de seguran√ßa
‚îÇ
‚îú‚îÄ‚îÄ cicd/                                # Configura√ß√µes de CI/CD
‚îÇ   ‚îú‚îÄ‚îÄ jenkins/                         # Pipelines Jenkins
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Jenkinsfile.build            # Pipeline de build
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Jenkinsfile.security         # Pipeline de an√°lise de seguran√ßa
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Jenkinsfile.deploy           # Pipeline de deploy
‚îÇ   ‚îú‚îÄ‚îÄ github-actions/                  # Workflows do GitHub Actions
‚îÇ   ‚îú‚îÄ‚îÄ sonarqube/                       # Configura√ß√µes SonarQube
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ quality-profiles/            # Perfis de qualidade
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ quality-gates/               # Gates de qualidade
‚îÇ   ‚îî‚îÄ‚îÄ trivy/                           # Configura√ß√µes do Trivy
‚îÇ
‚îú‚îÄ‚îÄ k8s/                                 # Configura√ß√µes Kubernetes
‚îÇ   ‚îú‚îÄ‚îÄ base/                            # Recursos base
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deployments/                 # Deployments base
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/                    # Servi√ßos base
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config-maps/                 # ConfigMaps base
‚îÇ   ‚îî‚îÄ‚îÄ overlays/                        # Configura√ß√µes por ambiente
‚îÇ       ‚îú‚îÄ‚îÄ dev/                         # Ambiente de desenvolvimento
‚îÇ       ‚îú‚îÄ‚îÄ staging/                     # Ambiente de homologa√ß√£o
‚îÇ       ‚îî‚îÄ‚îÄ prod/                        # Ambiente de produ√ß√£o
‚îÇ
‚îú‚îÄ‚îÄ docs/                                # Documenta√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ architecture/                    # Diagramas e documentos de arquitetura
‚îÇ   ‚îú‚îÄ‚îÄ api/                             # Documenta√ß√£o de API (OpenAPI/Swagger)
‚îÇ   ‚îú‚îÄ‚îÄ security/                        # Documenta√ß√£o de seguran√ßa
‚îÇ   ‚îú‚îÄ‚îÄ finops/                          # Documenta√ß√£o de FinOps e custos
‚îÇ   ‚îî‚îÄ‚îÄ operation/                       # Guias operacionais
‚îÇ
‚îú‚îÄ‚îÄ monitoring/                          # Configura√ß√µes de monitoramento
‚îÇ   ‚îú‚îÄ‚îÄ grafana/                         # Dashboards Grafana
‚îÇ   ‚îú‚îÄ‚îÄ prometheus/                      # Configura√ß√µes Prometheus
‚îÇ   ‚îî‚îÄ‚îÄ alerts/                          # Configura√ß√µes de alertas
‚îÇ
‚îú‚îÄ‚îÄ scripts/                             # Scripts auxiliares
‚îÇ   ‚îú‚îÄ‚îÄ setup/                           # Scripts de configura√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ deployment/                      # Scripts de implanta√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ maintenance/                     # Scripts de manuten√ß√£o
‚îÇ
‚îú‚îÄ‚îÄ .github/                             # Configura√ß√µes GitHub
‚îú‚îÄ‚îÄ .gitignore                           # Arquivos ignorados pelo Git
‚îú‚îÄ‚îÄ README.md                            # Este arquivo
‚îî‚îÄ‚îÄ LICENSE                              # Licen√ßa do projeto
```

- **Linguagens**:
  - **TypeScript/Node.js**: APIs RESTful, microservi√ßos de telemetria e notifica√ß√£o
  - **Python**: Servi√ßos de an√°lise de dados, IA e processamento de sinais

- **Frameworks**:
  - **NestJS**: Framework TypeScript para APIs e microservi√ßos 
  - **NestJS**: Framework TypeScript para o Frontend
  - **FastAPI**: Framework Python de alta performance para servi√ßos de IA
  - **TensorFlow/PyTorch**: Bibliotecas para modelos de IA
  - **scikit-learn**: Algoritmos de ML para an√°lise de dados

- **Banco de Dados**:
  - **Oracle Autonomous Database**: Armazenamento principal e an√°lise de dados
  - **Redis**: Caching e filas de mensagens

#### Requisitos Locais
1. Node.js 16+
2. Python 3.9+
3. Docker e Docker Compose
4. kubectl, OCI CLI, Terraform

### Frontend (Planejado)

- **NextJS**: Interface de usu√°rio moderna e responsiva
- **Recharts**: Visualiza√ß√£o de dados e dashboards
- **TailwindCSS**: Componentes de interface consistentes

### DevOps

- **Terraform**: Infraestrutura como c√≥digo
- **GitHub**: Controle de vers√£o com GitFlow
- **Jenkins**: Automa√ß√£o de CI/CD
- **SonarQube**: An√°lise de qualidade de c√≥digo
- **Trivy**: Escaneamento de vulnerabilidades
- **Grafana**: Monitoramento e dashboards

### Seguran√ßa

- **FortiGate**: Next-Generation Firewall
- **FortiWeb**: Web Application Firewall
- **FortiManager**: Gerenciamento centralizado
- **FortiAnalyzer**: An√°lise de logs e relat√≥rios
- **FortiSOAR**: Orquestra√ß√£o e resposta a incidentes
- **FortiAuthenticator**: Identidade e autentica√ß√£o

### Infraestrutura Cloud (OCI)

- **OKE (Kubernetes)**: Orquestra√ß√£o de containers para microsservi√ßos
- **Functions**: Serverless para processamento de eventos
- **Streaming**: Ingest√£o e processamento de dados em tempo real
- **Object Storage**: Armazenamento de dados n√£o estruturados
- **API Gateway**: Exposi√ß√£o e gest√£o de APIs
- **Autonomous Database**: Banco de dados gerenciado
- **Security Zones**: Pol√≠ticas de seguran√ßa unificadas

Bancos de Dados para Microservi√ßos
==================================

A arquitetura do sistema utiliza uma abordagem de "Database per Service" (banco de dados por servi√ßo), seguindo as melhores pr√°ticas para microservi√ßos. Cada servi√ßo possui seu pr√≥prio banco de dados, garantindo isolamento de dados, escalabilidade independente e evitando acoplamentos indesejados.

![Estrutura de banco de dados para cada microservi√ßo](docs/diagrams/bancos-dados-microservicos.svg)

Vis√£o Geral dos Bancos de Dados
-------------------------------

| Microservi√ßo | Tipo de Banco | Tecnologia | Finalidade | Caracter√≠sticas Principais |
| --- | --- | --- | --- | --- |
| equipment-service | Relacional | Oracle Autonomous Database | Armazenamento de dados de equipamentos, modelos e configura√ß√µes | - Alta disponibilidade<br>- Auto-tuning<br>- Backup autom√°tico |
| sensor-service | Relacional | Oracle Autonomous Database | Dados de sensores, calibra√ß√µes e especifica√ß√µes t√©cnicas | - Particionamento por tipo de sensor<br>- Cache integrado |
| maintenance-service | Relacional | Oracle Autonomous Database | Registros de manuten√ß√µes, hist√≥rico e agendamentos | - Retention policies<br>- Auditoria completa de altera√ß√µes |
| telemetry-service | Time Series | Oracle MySQL HeatWave | Dados de telemetria de alta frequ√™ncia | - Otimiza√ß√£o para s√©ries temporais<br>- Compress√£o de dados<br>- Particionamento temporal |
| analytics-service | H√≠brido | Oracle ADW + Object Storage | Dados processados e an√°lises estat√≠sticas | - In-database ML<br>- Processamento paralelo massivo |
| ai-service | H√≠brido | Oracle ADW + Object Storage | Armazenamento de modelos e dados de treinamento | - Escalabilidade para cargas de ML<br>- Armazenamento de modelos versionados |
| notification-service | NoSQL | MongoDB Atlas | Configura√ß√µes de alertas e hist√≥rico de notifica√ß√µes | - Esquema flex√≠vel<br>- Baixa lat√™ncia |
| auth-service | Relacional | Oracle Autonomous Database | Usu√°rios, pap√©is e permiss√µes | - Encripta√ß√£o avan√ßada<br>- Row-level security |

Detalhamento dos Bancos de Dados
--------------------------------

### 1\. Equipment Service - Oracle Autonomous Database

O Equipment Service utiliza Oracle Autonomous Database (ATP) para armazenar informa√ß√µes estruturadas sobre equipamentos industriais.

**Principais tabelas:**

-   `equipments`: Registro principal de equipamentos
-   `equipment_models`: Modelos/tipos de equipamentos
-   `equipment_specifications`: Especifica√ß√µes t√©cnicas
-   `equipment_locations`: Localiza√ß√£o f√≠sica dos equipamentos
-   `equipment_groups`: Agrupamentos l√≥gicos de equipamentos

**Caracter√≠sticas espec√≠ficas:**

-   Backups autom√°ticos com reten√ß√£o de 30 dias
-   Encripta√ß√£o transparente de dados (TDE)
-   Configura√ß√£o de alta disponibilidade (HA)
-   Aplica√ß√£o de pol√≠ticas autom√°ticas de Resource Manager

### 2\. Sensor Service - Oracle Autonomous Database

Armazena informa√ß√µes sobre todos os sensores instalados nos equipamentos, incluindo configura√ß√µes e calibra√ß√µes.

**Principais tabelas:**

-   `sensors`: Registro principal de sensores
-   `sensor_types`: Tipos de sensores suportados
-   `sensor_calibrations`: Hist√≥rico de calibra√ß√µes
-   `sensor_thresholds`: Limiares para alertas
-   `sensor_equipment_mapping`: Relacionamento entre sensores e equipamentos

**Caracter√≠sticas espec√≠ficas:**

-   Particionamento por tipo de sensor para otimiza√ß√£o de consultas
-   Pol√≠ticas de data masking para dados sens√≠veis
-   √çndices espec√≠ficos para pesquisas por equipamento

### 3\. Maintenance Service - Oracle Autonomous Database

Gerencia todo o hist√≥rico e agendamento de manuten√ß√µes, incluindo manuten√ß√µes preventivas, preditivas e corretivas.

**Principais tabelas:**

-   `maintenance_records`: Hist√≥rico de manuten√ß√µes realizadas
-   `maintenance_schedules`: Agendamentos de manuten√ß√µes futuras
-   `maintenance_types`: Tipos de manuten√ß√£o (preventiva, corretiva, etc.)
-   `maintenance_tasks`: Tarefas espec√≠ficas de cada manuten√ß√£o
-   `spare_parts`: Registro de pe√ßas de reposi√ß√£o utilizadas
-   `technicians`: Informa√ß√µes sobre t√©cnicos respons√°veis

**Caracter√≠sticas espec√≠ficas:**

-   Auditoria completa para rastreabilidade de altera√ß√µes
-   Pol√≠ticas de reten√ß√£o de dados conforme requisitos regulat√≥rios
-   Integra√ß√£o com servi√ßo de notifica√ß√µes para lembretes

### 4\. Telemetry Service - Oracle MySQL HeatWave

Armazena grandes volumes de dados de telemetria coletados em alta frequ√™ncia pelos sensores IoT.

**Principais tabelas:**

-   `telemetry_data`: Leituras de sensores
-   `telemetry_aggregated_hourly`: Dados agregados por hora
-   `telemetry_aggregated_daily`: Dados agregados por dia
-   `telemetry_metadata`: Metadados associados √†s leituras

**Caracter√≠sticas espec√≠ficas:**

-   Otimiza√ß√£o espec√≠fica para s√©ries temporais
-   Particionamento temporal (por dia/m√™s)
-   Pol√≠ticas autom√°ticas de compress√£o e arquivamento
-   Capacidade de processamento in-memory com HeatWave
-   TTL (Time-to-live) configur√°vel para dados antigos

### 5\. Analytics Service - Oracle ADW + Object Storage

Utiliza uma combina√ß√£o de banco de dados anal√≠tico (ADW) para processamento e Object Storage para dados n√£o estruturados e hist√≥ricos.

**Estrutura no ADW:**

-   `data_analysis_results`: Resultados de an√°lises estat√≠sticas
-   `kpi_metrics`: Indicadores-chave de performance
-   `correlation_analysis`: Correla√ß√µes entre diferentes m√©tricas
-   `trend_analysis`: An√°lises de tend√™ncias

**Estrutura no Object Storage:**

-   `/analytics/reports/`: Relat√≥rios gerados em PDF/CSV
-   `/analytics/datasets/`: Conjuntos de dados para an√°lises
-   `/analytics/exports/`: Exporta√ß√µes para sistemas externos

**Caracter√≠sticas espec√≠ficas:**

-   Machine Learning integrado ao banco de dados
-   Capacidade de processamento paralelo massivo
-   Integra√ß√£o com ferramentas de an√°lise (Jupyter, RStudio)

### 6\. AI Service - Oracle ADW + Object Storage

Gerencia modelos de IA, dados de treinamento e resultados de previs√µes.

**Estrutura no ADW:**

-   `prediction_models`: Registro de modelos dispon√≠veis
-   `model_versions`: Vers√µes de cada modelo
-   `model_training_history`: Hist√≥rico de treinamentos
-   `prediction_results`: Resultados de previs√µes
-   `feature_importance`: Import√¢ncia de features por modelo

**Estrutura no Object Storage:**

-   `/models/binary/`: Modelos serializados por vers√£o
-   `/models/training-data/`: Dados de treinamento
-   `/models/evaluation/`: Resultados de avalia√ß√£o de modelos

**Caracter√≠sticas espec√≠ficas:**

-   Versionamento de modelos
-   Rastreabilidade de treinamento
-   Avalia√ß√£o autom√°tica de performance
-   Recursos para explicabilidade de modelos (XAI)

### 7\. Notification Service - MongoDB Atlas

Utiliza MongoDB para armazenar configura√ß√µes flex√≠veis de alertas e hist√≥rico de notifica√ß√µes.

**Principais collections:**

-   `notification_templates`: Templates de mensagens
-   `notification_channels`: Canais de notifica√ß√£o (email, SMS, webhook)
-   `notification_rules`: Regras para gera√ß√£o de alertas
-   `notification_history`: Hist√≥rico de notifica√ß√µes enviadas
-   `user_preferences`: Prefer√™ncias de notifica√ß√£o por usu√°rio

**Caracter√≠sticas espec√≠ficas:**

-   Esquema flex√≠vel para diferentes tipos de notifica√ß√µes
-   Baixa lat√™ncia para consultas e inser√ß√µes
-   Replica√ß√£o para garantir alta disponibilidade
-   TTL para expirar automaticamente registros antigos

### 8\. Auth Service - Oracle Autonomous Database

Gerencia autentica√ß√£o, autoriza√ß√£o e controle de acesso.

**Principais tabelas:**

-   `users`: Informa√ß√µes de usu√°rios
-   `roles`: Pap√©is no sistema
-   `permissions`: Permiss√µes granulares
-   `role_permissions`: Relacionamento entre pap√©is e permiss√µes
-   `user_roles`: Relacionamento entre usu√°rios e pap√©is
-   `access_tokens`: Tokens de acesso
-   `audit_logs`: Logs de acesso e altera√ß√µes

**Caracter√≠sticas espec√≠ficas:**

-   Encripta√ß√£o de dados sens√≠veis (senhas, tokens)
-   Row-level security para isolamento de dados
-   Auditoria completa de acessos
-   Integra√ß√£o com sistema de Single Sign-On (SSO)

Estrat√©gias de Integra√ß√£o de Dados
----------------------------------

Embora cada microservi√ßo tenha seu pr√≥prio banco de dados, a integra√ß√£o de dados entre eles √© realizada atrav√©s de:

1.  **Comunica√ß√£o Ass√≠ncrona**:
    -   Sistema de mensageria baseado em eventos
    -   Oracle Stream Analytics para processamento de eventos complexos
    -   Padr√£o de Saga para transa√ß√µes distribu√≠das
2.  **API Gateway**:
    -   Agrega√ß√£o de dados de m√∫ltiplos servi√ßos quando necess√°rio
    -   Composi√ß√£o de APIs para interfaces de usu√°rio
3.  **CQRS (Command Query Responsibility Segregation)**:
    -   Modelos de escrita otimizados para cada servi√ßo
    -   Visualiza√ß√µes denormalizadas para consultas complexas
4.  **Replica√ß√£o Seletiva**:
    -   Replica√ß√£o somente das informa√ß√µes essenciais entre servi√ßos
    -   Eventual consistency onde aplic√°vel

Considera√ß√µes de FinOps
-----------------------

A escolha e configura√ß√£o dos bancos de dados consideram aspectos de otimiza√ß√£o de custos:

-   **Escalabilidade Autom√°tica**: Todos os bancos escalam automaticamente, evitando sobreprovisionamento
-   **Hiberna√ß√£o**: Ambientes n√£o-produtivos podem ser hibernados automaticamente
-   **Consolida√ß√£o Seletiva**: Ambientes de desenvolvimento e testes utilizam inst√¢ncias compartilhadas
-   **Storage Tiering**: Arquivamento autom√°tico de dados hist√≥ricos em camadas de armazenamento mais econ√¥micas
-   **Performance Insights**: Monitoramento cont√≠nuo para otimiza√ß√£o de queries e √≠ndices

Monitoramento e Seguran√ßa
-------------------------

Todos os bancos de dados implementam:

-   **Monitoramento Unificado**: Integra√ß√£o com Oracle Management Cloud
-   **Encripta√ß√£o**: Dados encriptados em repouso e em tr√¢nsito
-   **Auditing**: Logs de auditoria enviados para OCI Logging
-   **IAM**: Integra√ß√£o com OCI Identity and Access Management
-   **Masking**: Data masking autom√°tico para ambientes n√£o-produtivos
-   **Backups**: Pol√≠ticas de backup e recupera√ß√£o automatizadas

Esta abordagem de bancos de dados por servi√ßo proporciona isolamento adequado para cada componente do sistema, mantendo a flexibilidade para escolher a tecnologia mais adequada para cada caso de uso espec√≠fico, enquanto preserva princ√≠pios de seguran√ßa, custo-efici√™ncia e performance.

## Componentes

### Dispositivos IoT e Sensores

![Dispositivos IoT e Sensores](docs/diagrams/integracao-iot-cloud.svg)

#### Controlador
- **Raspberry Pi 4 Model B (8GB RAM)**: Controlador central que coleta dados dos sensores
  - **Custo**: ~$75 USD
  - **Vantagens**: Excelente pot√™ncia de processamento, ampla comunidade, m√∫ltiplas interfaces de comunica√ß√£o

#### Sensores para Monitoramento (Custo-Benef√≠cio)

##### Temperatura
- **DS18B20**: Sensor digital de temperatura resistente √† √°gua
  - **Custo**: ~$2-4 USD
  - **Precis√£o**: ¬±0.5¬∞C
  - **Range**: -55¬∞C a +125¬∞C
  - **Interface**: 1-Wire (digital)
  - **Vantagens**: Imperme√°vel, alta precis√£o, endere√ß√°vel (v√°rios sensores em um √∫nico barramento)

##### Corrente El√©trica
- **SCT-013-030**: Sensor de corrente n√£o invasivo (transformador de corrente)
  - **Custo**: ~$8-12 USD
  - **Range**: 0-30A
  - **Interface**: Anal√≥gica
  - **Vantagens**: N√£o invasivo (clamp-on), f√°cil instala√ß√£o sem interromper o circuito

##### Vibra√ß√£o
- **MPU6050**: Aceler√¥metro e girosc√≥pio 6-DOF
  - **Custo**: ~$3-5 USD
  - **Sensibilidade**: Configur√°vel, ¬±2g at√© ¬±16g
  - **Interface**: I¬≤C
  - **Vantagens**: Baixo custo, mede acelera√ß√£o e rota√ß√£o, processamento digital

##### Press√£o
- **BMP280**: Sensor de press√£o barom√©trica e temperatura
  - **Custo**: ~$2-4 USD
  - **Precis√£o**: ¬±1 hPa
  - **Range**: 300-1100 hPa
  - **Interface**: I¬≤C/SPI
  - **Vantagens**: Alta precis√£o, baixo consumo, sensor de temperatura integrado

##### Ac√∫stico
- **MAX9814**: Amplificador de microfone com controle autom√°tico de ganho
  - **Custo**: ~$4-7 USD
  - **Interface**: Anal√≥gica
  - **Vantagens**: Controle autom√°tico de ganho, ideal para detectar anomalias sonoras em equipamentos

##### RPM/Rota√ß√£o
- **LJ18A3-8-Z/BX**: Sensor de proximidade indutivo
  - **Custo**: ~$5-10 USD
  - **Range**: 8mm
  - **Interface**: Digital (NPN/PNP)
  - **Vantagens**: Robusto para ambientes industriais, alta precis√£o para contagem de rota√ß√µes

##### N√≠vel de L√≠quido
- **HC-SR04 (encapsulado)**: Sensor ultrass√¥nico √† prova d'√°gua
  - **Custo**: ~$3-6 USD
  - **Range**: 2-400cm
  - **Interface**: Digital
  - **Vantagens**: Sem contato com o l√≠quido, medi√ß√£o precisa, baixo custo

##### Qualidade de √ìleo
- **Capacitivo Personalizado**: Sensor capacitivo para monitoramento de contamina√ß√£o
  - **Custo**: ~$15-25 USD
  - **Interface**: Anal√≥gica
  - **Vantagens**: Detec√ß√£o de contaminantes, monitoramento de degrada√ß√£o

#### Kit Completo
Um kit completo para monitorar uma bomba industrial t√≠pica incluiria:
- 2x DS18B20 (temperatura)
- 1x SCT-013-030 (corrente)
- 1x MPU6050 (vibra√ß√£o)
- 1x BMP280 (press√£o)
- 1x MAX9814 (ac√∫stico)
- 1x LJ18A3-8-Z/BX (RPM)
- 1x HC-SR04 (n√≠vel)

**Custo total aproximado de sensores por equipamento**: $30-60 USD
**Custo total com Raspberry Pi**: $105-135 USD

### Componentes de Software

#### APIs Containers - (TypeScript/NestJS)
- **Equipment API**: Gest√£o de equipamentos e manuten√ß√µes
- **Sensor API**: Gest√£o de sensores e telemetria
- **Maintenance API**: Agendamento e hist√≥rico de manuten√ß√µes
- **Auth API**: Autentica√ß√£o e autoriza√ß√£o

#### Servi√ßos de Processamento e An√°lise
- **Telemetry Service**: Processamento de dados de sensores
- **Analytics Service**: An√°lise estat√≠stica de dados hist√≥ricos
- **AI Service**: Modelos de previs√£o de falhas
- **Notification Service**: Gest√£o de alertas e notifica√ß√µes

#### Fun√ß√µes Serverless
- **Data Transformation**: Normaliza√ß√£o e transforma√ß√£o de dados
- **Anomaly Detection**: Identifica√ß√£o de padr√µes an√¥malos
- **Alert Trigger**: Gera√ß√£o de alertas com base em regras
- **Report Generator**: Gera√ß√£o autom√°tica de relat√≥rios

#### Modelos de IA Implementados
- **LSTM (Long Short-Term Memory)**: Previs√£o de s√©ries temporais de telemetria
- **Isolation Forest**: Detec√ß√£o de anomalias n√£o supervisionada
- **Random Forest**: Classifica√ß√£o de estados de equipamentos
- **CNN (Convolutional Neural Network)**: An√°lise de espectrogramas de vibra√ß√£o e √°udio
- **Transformer**: An√°lise de padr√µes complexos em m√∫ltiplas vari√°veis

## üí∞ FinOps e Otimiza√ß√£o de Custos

![FinOps e Otimiza√ß√£o de Custos](docs/diagrams/finops.svg)

O projeto implementa pr√°ticas robustas de FinOps para garantir o melhor custo-benef√≠cio sem comprometer seguran√ßa ou performance.

### Arquitetura Otimizada para Custo

- **Computa√ß√£o Serverless Estrat√©gica**:
  - Uso de OCI Functions para cargas de trabalho intermitentes
  - Escalonamento autom√°tico baseado em demanda
  - Cold starts minimizados atrav√©s de provisioned concurrency

- **Tiering Inteligente de Armazenamento**:
  - Pol√≠ticas autom√°ticas de lifecycle para Object Storage
  - Dados frequentemente acessados em Standard Storage
  - Dados hist√≥ricos migrados automaticamente para Archive Storage
  - Economia de 71% em custos de armazenamento a longo prazo

- **Sizing Adequado de Recursos**:
  - An√°lise cont√≠nua de utiliza√ß√£o com OCI Usage Metrics
  - Redimensionamento autom√°tico de inst√¢ncias Kubernetes
  - Rightsizing baseado em padr√µes de uso

### Controle e Governan√ßa de Custos

- **Or√ßamentos e Alertas**:
  - Or√ßamentos definidos por compartimento e projeto
  - Alertas proativos para desvios de gastos
  - Previs√£o de custos baseada em tend√™ncias

- **Tagging Abrangente**:
  - Todos os recursos taggeados por centro de custo, projeto e ambiente
  - Relat√≥rios detalhados de custos por tag
  - Chargeback e showback automatizados

- **Automa√ß√£o de Economia**:
  - Desligamento programado de ambientes de desenvolvimento
  - Reserved Instances para cargas de trabalho previs√≠veis
  - Otimiza√ß√£o autom√°tica de snapshots e backups

### An√°lise de ROI e TCO

| Componente | Custo Mensal | Economia vs. On-Premise | Economia vs. AWS |
|------------|--------------|------------------------|-----------------|
| Computa√ß√£o | $950 | 42% | 28% |
| Armazenamento | $350 | 65% | 31% |
| Networking | $200 | 38% | 22% |
| Banco de Dados | $650 | 54% | 35% |
| **Total** | **$2,150** | **49%** | **30%** |

Economia anual estimada: **$25,800**

### Sensores com Excelente Custo-Benef√≠cio

Nossa sele√ß√£o de sensores industriais prioriza qualidade e confiabilidade com custo acess√≠vel:

| Sensor | Modelo | Custo (USD) | Precis√£o | Durabilidade | ROI |
|--------|--------|-------------|----------|--------------|-----|
| Temperatura | DS18B20 | $2-4 | ¬±0.5¬∞C | 5+ anos | Alto |
| Corrente | SCT-013-030 | $8-12 | ¬±1% | 8+ anos | Alto |
| Vibra√ß√£o | MPU6050 | $3-5 | ¬±2% | 3+ anos | Muito Alto |
| Ac√∫stico | MAX9814 | $4-7 | Ajust√°vel | 4+ anos | M√©dio |
| N√≠vel | HC-SR04 | $3-6 | ¬±3mm | 4+ anos | Alto |

Kit completo para monitoramento de uma bomba industrial: **$25-40** (economia de 80-90% vs. solu√ß√µes propriet√°rias)

### M√©tricas de Economia por Manuten√ß√£o Preditiva

- **Redu√ß√£o em Pe√ßas de Reposi√ß√£o**: Economia de 30-40%
- **Redu√ß√£o em Horas de Manuten√ß√£o**: Economia de 45-60%
- **Aumento de Vida √ötil de Equipamentos**: +20-40%
- **Redu√ß√£o de Energia**: 5-15% por equipamento otimizado
- **Tempo de Amortiza√ß√£o da Solu√ß√£o**: 6-12 meses


### Processo de Pull Request

1.  Crie uma branch a partir de `develop` seguindo a conven√ß√£o:
    -   `feature/nome-da-feature` para novas funcionalidades
    -   `bugfix/nome-do-bug` para corre√ß√µes
    -   `hotfix/nome-do-hotfix` para corre√ß√µes urgentes
2.  Desenvolva e teste suas mudan√ßas localmente
3.  Certifique-se de que:
    -   Todos os testes est√£o passando: `npm test` e `pytest`
    -   O linting est√° correto: `npm run lint` e `flake8`
    -   A cobertura de testes √© adequada (m√≠nimo 80%)
4.  Abra um PR para `develop` usando o template fornecido
5.  O PR ser√° automaticamente verificado por:
    -   Jenkins para CI/CD
    -   SonarQube para qualidade de c√≥digo
    -   Trivy para an√°lise de seguran√ßa
6.  Ap√≥s aprova√ß√£o de pelo menos 2 revisores e todos os checks passarem, o PR pode ser mergeado

### Guidelines para Testes

#### Testes Unit√°rios

-   Teste todas as fun√ß√µes p√∫blicas
-   Use mocks para depend√™ncias externas
-   Mantenha os testes independentes entre si

#### Testes de Integra√ß√£o

-   Teste a intera√ß√£o entre componentes
-   Use containers para simular servi√ßos externos

#### Testes End-to-End

-   Teste fluxos completos do usu√°rio
-   Use ambientes de teste isolados

### Instru√ß√µes para Debugging

#### Microservi√ßos em TypeScript

bash

```
# Executar servi√ßo com debugging ativado
cd microservices/equipment-service
npm run start:debug
```

Depois conecte-se usando VSCode ou Chrome DevTools na porta 9229.

#### Servi√ßos Python

bash

```
# Executar com debugging
cd microservices/ai-service
python -m debugpy --listen 5678 --wait-for-client src/main.py
```

### Padr√µes de C√≥digo

-   **TypeScript**: Seguir guia de estilo do Airbnb
-   **Python**: Seguir PEP 8
-   **Coment√°rios**: JSDoc para TypeScript, docstrings para Python
-   **Testes**: Cobertura m√≠nima de 80%

Licen√ßa
-------

Este projeto √© propriet√°rio e confidencial. ¬© 2025 AetherAI. Todos os direitos reservados.

Contato
-------

Para mais informa√ß√µes, entre em contato com a equipe de desenvolvimento:

-   Email: <dev@aetherai.com>
-   Website: <https://www.aetherai.com>
-   Issue Tracker: <https://github.com/aetherAI/fortinet-challenge/issues>
